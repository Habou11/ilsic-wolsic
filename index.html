<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ì¼ì‹Â·ì›”ì‹ ì‹œë®¬ë ˆì´í„°</title>
<style>
body {
  margin: 0; padding: 20px;
  background: linear-gradient(135deg, #0c0c2e 0%, #1a1a4a 100%);
  font-family: 'Arial', sans-serif; color: white; min-height: 100vh;
}
.container { max-width: 1200px; margin: 0 auto; }
h1 { text-align: center; margin-bottom: 30px; text-shadow: 0 0 20px rgba(255,255,255,.5); }
.simulator-container { background: rgba(0,0,0,.3); border-radius: 15px; padding:20px; margin-bottom:20px; box-shadow:0 0 30px rgba(255,255,255,.1);}
.canvas-container { position: relative; margin-bottom:20px;}
#canvas { border:2px solid rgba(255,255,255,.3); border-radius:10px; background: radial-gradient(ellipse at center, #0a0a2e 0%, #000 100%); display:block; margin:0 auto;}
.controls { display:grid; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); gap:20px; margin-bottom:20px;}
.control-group { background: rgba(255,255,255,.1); padding:15px; border-radius:10px; backdrop-filter: blur(10px);}
.control-group h3 { margin-top:0; color:#ffd700; text-shadow:0 0 10px rgba(255,215,0,.5);}
.control-item { margin-bottom:15px;}
label { display:block; margin-bottom:5px; font-weight:bold;}
input[type=range]{width:100%; height:6px; border-radius:3px; background:rgba(255,255,255,.2); outline:none;}
input[type=range]::-webkit-slider-thumb{width:20px; height:20px; border-radius:50%; background:#ffd700; cursor:pointer; box-shadow:0 0 10px rgba(255,215,0,.8);}
input[type=range]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#ffd700;cursor:pointer;border:none;box-shadow:0 0 10px rgba(255,215,0,.8);}
.preset-buttons{display:flex; gap:10px; flex-wrap:wrap; justify-content:center;}
button{padding:10px 20px; border:none; border-radius:25px; background:linear-gradient(45deg,#ff6b6b,#ff8e53); color:white; font-weight:bold; cursor:pointer; transition:.3s; box-shadow:0 4px 15px rgba(255,107,107,.3);}
button:hover{transform:translateY(-2px); box-shadow:0 6px 20px rgba(255,107,107,.5);}
.info-panel{background:rgba(255,255,255,.1); padding:15px; border-radius:10px; backdrop-filter: blur(10px); text-align:center;}
.eclipse-type{font-size:24px; font-weight:bold; margin-bottom:10px; text-shadow:0 0 15px currentColor;}
.eclipse-description{font-size:16px; line-height:1.4; opacity:.9;}
.legend{display:flex; justify-content:center; gap:20px; margin-top:15px; flex-wrap:wrap;}
.legend-item{display:flex; align-items:center; gap:8px; font-size:12px;}
.legend-circle{width:16px; height:16px; border-radius:50%; box-shadow:0 0 8px currentColor;}
@media(max-width:768px){.controls{grid-template-columns:1fr;} .preset-buttons{flex-direction:column;} .legend{flex-direction:column; align-items:center; gap:10px;}}
</style>
</head>
<body>
<div class="container">
<h1>ğŸŒ ì¼ì‹Â·ì›”ì‹ ì‹œë®¬ë ˆì´í„° ğŸŒ™</h1>
<div class="simulator-container">
  <div class="canvas-container">
    <canvas id="canvas" width="800" height="400"></canvas>
  </div>
  <div class="controls">
    <div class="control-group">
      <h3>ğŸŒ™ ë‹¬ì˜ ìœ„ì¹˜</h3>
      <div class="control-item">
        <label for="moonAngle">ê°ë„ (ë„): <span id="moonAngleValue">0</span></label>
        <input type="range" id="moonAngle" min="0" max="360" value="0">
      </div>
      <div class="control-item">
        <label for="moonDistance">ê±°ë¦¬: <span id="moonDistanceValue">120</span></label>
        <input type="range" id="moonDistance" min="80" max="160" value="120">
      </div>
    </div>
    <div class="control-group">
      <h3>âš™ï¸ ì‹œë®¬ë ˆì´ì…˜ ì„¤ì •</h3>
      <div class="control-item">
        <label for="animationSpeed">ë‹¬ ê³µì „ ì†ë„: <span id="animationSpeedValue">ì •ì§€</span></label>
        <input type="range" id="animationSpeed" min="0" max="3" step="0.5" value="0">
      </div>
    </div>
  </div>
  <div class="preset-buttons">
    <button onclick="setSolarEclipse()">ğŸŒ‘ ê°œê¸°ì¼ì‹</button>
    <button onclick="setLunarEclipse()">ğŸŒ• ê°œê¸°ì›”ì‹</button>
    <button onclick="setPartialSolarEclipse()">ğŸŒ“ ë¶€ë¶„ì¼ì‹</button>
    <button onclick="setPartialLunarEclipse()">ğŸŒ– ë¶€ë¶„ì›”ì‹</button>
    <button onclick="toggleAnimation()" id="playButton">â–¶ï¸ ì¬ìƒ</button>
    <button onclick="resetPositions()">ğŸ”„ ì´ˆê¸°í™”</button>
  </div>
  <div class="info-panel">
    <div class="eclipse-type" id="eclipseType">ì¼ë°˜ ìƒíƒœ</div>
    <div class="eclipse-description" id="eclipseDescription">íƒœì–‘, ì§€êµ¬, ë‹¬ì´ ì¼ì§ì„ ìƒì— ìˆì§€ ì•Šì€ í‰ìƒì‹œ ìƒíƒœì…ë‹ˆë‹¤.</div>
    <div class="legend">
      <div class="legend-item"><div class="legend-circle" style="background:#ffd700;"></div><span>íƒœì–‘</span></div>
      <div class="legend-item"><div class="legend-circle" style="background:#4a90e2;"></div><span>ì§€êµ¬</span></div>
      <div class="legend-item"><div class="legend-circle" style="background:#c0c0c0;"></div><span>ë‹¬</span></div>
    </div>
  </div>
</div>
</div>
<script>
const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");
let moonAngle=0,moonDistance=120,animationSpeed=0,animationId;
const sun={x:100,y:200,radius:30},earth={x:400,y:200,radius:25};

function updateSliderValues(){
  document.getElementById("moonAngleValue").textContent=moonAngle;
  document.getElementById("moonDistanceValue").textContent=moonDistance;
  document.getElementById("animationSpeedValue").textContent=animationSpeed===0?"ì •ì§€":animationSpeed+"x";
}

document.getElementById("moonAngle").addEventListener("input",e=>{moonAngle=parseInt(e.target.value);updateSliderValues();draw()});
document.getElementById("moonDistance").addEventListener("input",e=>{moonDistance=parseInt(e.target.value);updateSliderValues();draw()});
document.getElementById("animationSpeed").addEventListener("input",e=>{
  animationSpeed=parseFloat(e.target.value);
  updateSliderValues();
  document.getElementById("playButton").textContent=animationSpeed>0?"â¸ï¸ ì¼ì‹œì •ì§€":"â–¶ï¸ ì¬ìƒ";
});

function getMoonPosition(){
  const rad=moonAngle*Math.PI/180;
  return {x:earth.x+Math.cos(rad)*moonDistance, y:earth.y+Math.sin(rad)*moonDistance};
}

// ğŸŒ™ ë‹¬ ê·¸ë¦¬ê¸° (ê·¸ë¦¼ì ì œê±° + ì›”ì‹ ì‹œ ë¶‰ê²Œ)
function drawMoon(x,y,radius){
  const eclipse=detectEclipse();
  let color="#c0c0c0"; 
  if(eclipse.type==="total_lunar") color="#ff4444";
  if(eclipse.type==="partial_lunar") color="#ff7777";

  ctx.fillStyle=color;
  ctx.beginPath();
  ctx.arc(x,y,radius,0,Math.PI*2); ctx.fill();

  // ê°„ë‹¨ í¬ë ˆì´í„°
  ctx.fillStyle="rgba(80,80,80,0.6)";
  ctx.beginPath();
  ctx.arc(x-5,y-4,2,0,Math.PI*2);
  ctx.arc(x+6,y+3,1.5,0,Math.PI*2);
  ctx.arc(x-3,y+5,1,0,Math.PI*2);
  ctx.fill();
}

function drawBody(x,y,radius,color,glow=true){
  if(glow){
    const grad=ctx.createRadialGradient(x,y,0,x,y,2*radius);
    grad.addColorStop(0,color); grad.addColorStop(.7,color); grad.addColorStop(1,"transparent");
    ctx.fillStyle=grad;
    ctx.fillRect(x-2*radius,y-2*radius,4*radius,4*radius);
  }
  ctx.fillStyle=color;
  ctx.beginPath();
  ctx.arc(x,y,radius,0,2*Math.PI);
  ctx.fill();
}

function detectEclipse(){
  const moon=getMoonPosition();
  const t=Math.atan2(earth.y-sun.y,earth.x-sun.x);
  const a=Math.atan2(moon.y-earth.y,moon.x-earth.x);
  let diff=Math.abs(t-a); diff=Math.min(diff,2*Math.PI-diff);
  if(diff<.25) return moon.x>earth.x?{type:"total_lunar",name:"ğŸŒ• ê°œê¸°ì›”ì‹",description:"ë‹¬ì´ ì§€êµ¬ ê·¸ë¦¼ìì— ë“¤ì–´ ë¶‰ê²Œ ë³´ì…ë‹ˆë‹¤."}:{type:"total_solar",name:"ğŸŒ‘ ê°œê¸°ì¼ì‹",description:"ë‹¬ì´ íƒœì–‘ì„ ì™„ì „íˆ ê°€ë¦½ë‹ˆë‹¤."};
  if(diff<.5) return moon.x>earth.x?{type:"partial_lunar",name:"ğŸŒ– ë¶€ë¶„ì›”ì‹",description:"ë‹¬ ì¼ë¶€ê°€ ì§€êµ¬ ê·¸ë¦¼ìì— ë“¤ì–´ê°‘ë‹ˆë‹¤."}:{type:"partial_solar",name:"ğŸŒ“ ë¶€ë¶„ì¼ì‹",description:"ë‹¬ ì¼ë¶€ê°€ íƒœì–‘ì„ ê°€ë¦½ë‹ˆë‹¤."};
  return {type:"normal",name:"ì¼ë°˜ ìƒíƒœ",description:"íƒœì–‘, ì§€êµ¬, ë‹¬ì´ ì¼ì§ì„ ìƒì— ìˆì§€ ì•Šì€ í‰ìƒì‹œ ìƒíƒœì…ë‹ˆë‹¤."};
}

function updateInfo(){
  const e=detectEclipse();
  document.getElementById("eclipseType").textContent=e.name;
  document.getElementById("eclipseDescription").textContent=e.description;
  const colors={total_solar:"#ff2222",total_lunar:"#cc4444",partial_solar:"#ff8844",partial_lunar:"#ffaa66",normal:"#ffd700"};
  document.getElementById("eclipseType").style.color=colors[e.type];
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const moon=getMoonPosition();

  // ë³„
  ctx.fillStyle="rgba(255,255,255,.3)";
  for(let i=0;i<40;i++){ctx.beginPath();ctx.arc(137*i%canvas.width,197*i%canvas.height,1,0,2*Math.PI);ctx.fill();}

  // ê¶¤ë„
  ctx.strokeStyle="rgba(255,255,255,.2)";
  ctx.lineWidth=1; ctx.setLineDash([5,5]);
  ctx.beginPath(); ctx.arc(earth.x,earth.y,moonDistance,0,2*Math.PI); ctx.stroke();
  ctx.setLineDash([]);

  // íƒœì–‘ & ì§€êµ¬
  drawBody(sun.x,sun.y,sun.radius,"#ffd700",true);
  drawBody(earth.x,earth.y,earth.radius,"#4a90e2",true);

  // ëŒ€ë¥™ ìƒ‰
  ctx.fillStyle="#2d5016"; ctx.beginPath(); ctx.arc(earth.x-8,earth.y-8,6,0,2*Math.PI); ctx.fill();
  ctx.fillStyle="#4a7c59"; ctx.beginPath(); ctx.arc(earth.x+6,earth.y+5,8,0,2*Math.PI); ctx.fill();

  // ë‹¬
  drawMoon(moon.x,moon.y,12);

  updateInfo();
}

function animate(){
  moonAngle = (moonAngle - animationSpeed + 360) % 360; // â† ë°˜ì‹œê³„, ì‹œê³„ ë°˜ëŒ€
  updateSliderValues();
  draw();
  animationId=requestAnimationFrame(animate);
}

function toggleAnimation(){animationId?(cancelAnimationFrame(animationId),animationId=null,document.getElementById("playButton").textContent="â–¶ï¸ ì¬ìƒ"):(animate(),document.getElementById("playButton").textContent="â¸ï¸ ì¼ì‹œì •ì§€")}
function resetPositions(){moonAngle=0;moonDistance=120;animationSpeed=0;document.getElementById("moonAngle").value=0;document.getElementById("moonDistance").value=120;document.getElementById("animationSpeed").value=0;updateSliderValues();draw();}
function setSolarEclipse(){moonAngle=0;moonDistance=120;document.getElementById("moonAngle").value=0;draw();}
function setLunarEclipse(){moonAngle=180;moonDistance=120;document.getElementById("moonAngle").value=180;draw();}
function setPartialSolarEclipse(){moonAngle=10;moonDistance=120;document.getElementById("moonAngle").value=10;draw();}
function setPartialLunarEclipse(){moonAngle=170;moonDistance=120;document.getElementById("moonAngle").value=170;draw();}

updateSliderValues(); draw();
</script>
</body>
</html>
